---
layout: post
title: Git系列--Git仓库
tags: git
categories: git
---

《Git系列》文章是博主阅读Git官方book提取整理出的内容，意在深入理解Git的工作机制、原理
<!--more-->

# 简介
>前一篇文章中简单引入了Git仓库的概念--用来保存项目的元数据和对象数据库的地方，是整个Git数据库的集合；

Git仓库是整个Git版本控制系统的基础，所有的Git操作都必须基于Git仓库，下面就让我们来认识一下它吧！

# 获取Git仓库
Git项目仓库的获取方式有以下两种：

1. 本地创建Git仓库
2. 从Git远程服务器克隆仓库

## 本地仓库
本地创建Git仓库的方式可以用一条命令来完成：

1. cd到需要项目目录中
2. 执行`git init`操作初始化仓库

![](/images/git/init.png)

## 远程仓库
如果你正在进行团队协作项目开发或更换电脑需要重新拉取项目，那么`git clone`能很好的帮你从远程拉取到远程Git仓库中最新版本的项目代码；

克隆仓库的命令格式是`git clone [url]`，当然你也可以拉取Git仓库中特定分支的内容，格式是`git clone -b [branch] [url]`

![](/images/git/clone.png)

`git clone`命令默认拉取的是远程Git仓库master分支中的数据，默认配置中会拉取每一个文件的每一个版本

## Git仓库目录结构
一个新的Git仓库的目录结构如下图所示：

![](/images/git/git_dir.png)

- HEAD:指示目前被检出的分支
- config:包含项目特有的配置选项
- description:仅供 GitWeb 程序使用，我们无需关心
- hooks:包含客户端或服务端的钩子脚本（hook scripts）
- info:包含一个全局性排除（global exclude）文件，用以放置那些不希望被记录在 .gitignore 文件中的忽略模式（ignored patterns）
- objects:存储所有数据内容
- refs:存储指向数据（分支）的提交对象的指针

# 配置与使用
>这部分的内容主要介绍了一些Git正式使用前的一些准备工作和简单使用，config和remote两个指令。

## config
在使用Git之前需要配置姓名和邮箱等信息(不配置该信息可能无法提交至远程)，那么配置的方式有以下两种：

1. `git config`指令
2. 文件配置

(1)指令方式

```
git config --global user.name "John Doe"
git config --global user.email johndoe@example.com
```

`--global`选项的含义代表全局配置，即只要配置一次即可在当前机器上生效，若需要对某个项目单独配置，需在该项目目录下执行config命令，但不必带上`--global`参数。

config全部可选参数可见官网文档：[git-config](https://git-scm.com/docs/git-config)

(2)文件方式

1. /etc/gitconfig 文件: 包含系统上每一个用户及他们仓库的通用配置。 如果使用带有 --system 选项的 git config 时，它会从此文件读写配置变量。
2. ~/.gitconfig 或 ~/.config/git/config 文件：只针对当前用户。 可以传递 --global 选项让 Git 读写此文件。
3. 当前使用仓库的 Git 目录中的 config 文件（就是 .git/config）：针对该仓库。

上述三个文件对应的作用域级别不同，顺序为 仓库级别 > 用户级别 > 系统级别

补充：可通过`config`命令来查看已生效的配置：`git config --list`

## remote
Git作为分布式版本控制系统的代表，其主要作用是为了能更好的进行团队协作，故进行远程Git仓库的配置是必不可少的；

`git remote -v`可查看当前Git仓库关联的远程库列表(通过`git clone`的仓库自动带有远程仓库的信息)，附上博主的一个Git仓库

![](/images/git/remote.png)

左侧的origin为远程仓库的别名，右侧为远程Git仓库的地址

remote的一些简单操作：

1. 若是本地创建的Git仓库，则需要手动添加远程Git仓库：`git remote add [alias] [url]`
2. 重命名：`git remote rename [old_alias] [new_alias]`
3. 删除远程仓库：`git remote rm [alias]`

上一篇：[Git系列--初识](/2017-05-04/git_01)

下一篇：[Git系列之基础篇--add](/2017-05-06/git_03)
