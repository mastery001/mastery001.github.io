---
layout: post
title: 压测工具siege的简单使用
tags: [siege]
category: Knowledge
---

Siege是一个压力测试和评测工具，设计用于WEB开发这评估应用在压力下的承受能力：可以根据配置对一个WEB站点进行多用户的并发访问，记录每个用户所有请求过程的相应时间，并在一定数量的并发访问下重复进行。

<!--more-->

# Siege Introduction #


## Ubuntu Install ##

    #检验siege是否存在apt中 
    sudo apt-cache search siege
    #安装
    sudo apt-get install siege


## Parameter Description ##

| Parameter   | Description
| ----------  | -----------
| -C或-config | 在屏幕上打印显示出当前的配置,配置是包括在他的配置文$HOME/.siegerc中,可以编辑里面的参数,这样每次siege 都会按照它运行. 
| -v  | 输出版本信息和siege一些命令
| -c n或-concurrent=n | 模拟n个用户同时并发访问；n不要设置的太大，因为越大，siege消耗的资源就更多
| -i 或 -internet | 随机访问urls.txt中的url列表项，以此模拟真实的访问情况（随机性）
| -d n 或 -delay=n | hit每个url之间访问的延迟，在0-n之间;一般该参数不会>10
| -r n 或 -reps=n | 重复运行测试n次，不能与-t同时设置
| -t n 或 -time=n | 持续运行siege n秒，如10S(秒)，10M(分钟),10H(小时)
| -l | 运行结束，将统计数据保存到日志文件中siege.log，可通过siege -C查看siege.log的具体位置，也可在配置文件中自定义
| -R SIEGERC 或 -rc=SIEGERC | 指定用特定的siege配置文件来运行，默认为$HOME/.siegerc
| -f file 或 -file=FILE | 指定urls文件来运行
| -u URL 或 -url=URL | 测试指定的url

### Use Parameter ##
1. siege -C
![siege -C](/images/siege/siege_c.png)

2. siege -v
![siege -v](/images/siege/siege_v.png)

3. siege -d 10 -c 50 -t 10 https://www.baidu.com/ (模拟50个用户并发访问百度首页10秒)
![结果3](/images/siege/siege_url.png)

4.  siege -d 10 -i -c 100 -t 10S -f urls.txt (模拟100个用户并发随机访问urls中的网址)
![结果4](/images/siege/siege_file.png)

### Result Parameter Description ##

	Transactions:165 hits //总请求次数165次
	Availability:100.00 % //成功率100%
	Elapsed time:9.55 secs //使用时间
	Data transferred:0.03 MB //总数据传输
	Response time:0.05 secs  // 响应时间，显示网络连接的速度
	Transaction rate:17.28 trans/sec //平均每秒完成17.28次处理
	Throughput:0.00 MB/sec//平均每秒传输数据
	Concurrency:0.84  //实际最高并发连接数
	Successful transactions:165  //成功请求次数
	Failed transactions:0//失败请求次数
	Longest transaction:0.12 //每次传输花费最长时间
	Shortest transaction:0.02//每次传输花费最短时间

